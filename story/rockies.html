<!DOCTYPE html>
<html>
  <head>
    <title>Rockies Adventure</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <style>
        /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
        #map {
        height: 100%;
        }

        /* Optional: Makes the sample page fill the window. */
        html,
        body {
        height: 100%;
        margin: 0;
        padding: 0;
        font-family: 'Trebuchet MS', sans-serif;
        }
        h1 {
          text-align: center;
      }
        #legend {
          font-family: Arial, sans-serif;
          background: #fff;
          padding: 10px;
          margin: 10px;
          border: 3px solid #000;
        }

        #legend h3 {
          margin-top: 0;
        }

        #legend img {
          vertical-align: middle;
        }
    </style>
    <script>
      /*Map JS class objects define a single map on a page - a new instance is required for each map (i.e. the 'new' operator below)
        Define a new variable named 'map'*/
      let map;
      function initMap() {
        /*assigns map to a new Map object. The Map() function is a constructor.
        The script references the HTML element "map" and inserts the map there*/
        const infowindow = new google.maps.InfoWindow();
        map = new google.maps.Map(document.getElementById("map"), {
          /*center on Banff but showing all of the Rockies*/
          center: { lat:  51.549, lng: -115.815 }, 
          zoom: 7,
          mapTypeId: "terrain",
        });
        setMarkers(map);
        const hike = new google.maps.Polyline({
            path: [{ lat: 49.04703, lng: -113.91664},
              { lat: 49.04665, lng: -113.9169},
              { lat: 49.04614, lng: -113.91704},
              { lat: 49.04603, lng: -113.9171},
              { lat: 49.04595, lng: -113.91728},
              { lat: 49.04542, lng: -113.91705},
              { lat: 49.0451, lng: -113.91721},
              { lat: 49.04453, lng: -113.91645},
              { lat: 49.04356, lng: -113.91642},
              { lat: 49.0431, lng: -113.91609},
              { lat: 49.04214, lng: -113.91569},
              { lat: 49.04102, lng: -113.91496},
              { lat: 49.0404, lng: -113.91494},
              { lat: 49.03995, lng: -113.91471},
              { lat: 49.0388, lng: -113.91369},
              { lat: 49.03795, lng: -113.91274},
              { lat: 49.0363, lng: -113.91192},
              { lat: 49.036, lng: -113.91283},
              { lat: 49.03454, lng: -113.91399},
              { lat: 49.03475, lng: -113.91558},
              { lat: 49.03516, lng: -113.91711},
              { lat: 49.03495, lng: -113.91794},
              { lat: 49.03435, lng: -113.91959},
              { lat: 49.03477, lng: -113.92185},
              { lat: 49.0347, lng: -113.92521},
              { lat: 49.03318, lng: -113.92695},
              { lat: 49.0344, lng: -113.92841},
              { lat: 49.03405, lng: -113.92981},
              { lat: 49.03365, lng: -113.93073},
              { lat: 49.03324, lng: -113.93161},
              { lat: 49.03284, lng: -113.93114},
              { lat: 49.03227, lng: -113.93289},
              { lat: 49.03137, lng: -113.93385},
              { lat: 49.02986, lng: -113.93524},
              { lat: 49.03061, lng: -113.93651},
            ],
            geodesic: true,
            strokeColor: "#7d4332",
            strokeOpacity: 1.0,
            strokeWeight: 3,
        });
        hike.setMap(map);
        map.set('styles', [
  {
    featureType: "poi",
    elementType: "labels",
    stylers: [
      { visibility: "off" }
    ]
  }
]);
        const trails = [
        ["Bertha Lake Trail", "12.4 km", "620 m", 49.04816507323466, -113.91667188647916],
        ["Lake Agnes Trail", "7.4 km", "435 m", 51.41737071868133, -116.21939061999059],
        ["Tunnel Mountain Trail", "4.5 km", "267 m", 51.177196059480046, -115.5600803504868],
        ["Valley of the Five Lakes Trail", "4.7 km", "162 m",  52.808421710875415, -118.02347356554966]
      ];
      const boot = {
          url:"https://img.icons8.com/external-soft-fill-juicy-fish/60/000000/external-hiking-travel-soft-fill-soft-fill-juicy-fish.png",
          scaledSize: new google.maps.Size(24,24),
        };
      for (let index = 0; index < trails.length; index++) {
        const trail = trails[index];
        const contentString = 
        '<div id="content">' +
        '<div id="siteNotice">' +
        "</div>" +
        '<h1 id="firstHeading" class="firstHeading">'+ trail[0]+'</h1>' +
        '<div id="bodyContent">'+"<p><b>Length: </b>"+trail[1]+"</p>"+"<p><b>Elevation change: </b>"+trail[2]+"</p>"
          +'</div>'+'</div>';
        const mark = new google.maps.Marker({
          position: {lat: trail[3], lng: trail[4]},
          map,
          title: trail[0],
          icon: boot,
          zIndex: 1,
        });
        mark.addListener("click", () => {
          infowindow.close();
          infowindow.setContent(contentString);
          infowindow.open(map,mark);
      });
    }
    const icons = {
      Trails: {
        name: "Hiking Trail",
        icon: boot.url,
      },
      Campground: {
        name: "Campground",
        icon: "https://img.icons8.com/external-those-icons-lineal-color-those-icons/24/000000/external-camping-camping-hiking-those-icons-lineal-color-those-icons.png"
      }
    };
    const legend = document.getElementById("legend");
    for (const key in icons) {
      const type=icons[key];
      const name = type.name;
      const icon = type.icon;
      const div = document.createElement("div");
      div.innerHTML = '<img src='+icon+' width="24" height="24">'+name;
      legend.appendChild(div);
    }
    map.controls[google.maps.ControlPosition.RIGHT_TOP].push(legend);
  }
      const campgrounds = [
        ["Townsite Campground, Waterton Lakes", 49.0484393, -113.9093212],
        ["Wabasso Campground, Jasper", 52.7643534, -117.987634973],
        ["Tunnel Mountain Village Campground, Banff", 51.195413052, -115.522632340],
        ["Lake Louise Campground, Banff", 51.41773100, -116.17266119],
        ];
      
      /*hiking boot icon: <img src=/>*/
      function setMarkers(map) {
        const tent = {
          url: "https://img.icons8.com/external-those-icons-lineal-color-those-icons/24/000000/external-camping-camping-hiking-those-icons-lineal-color-those-icons.png",
          Size: new google.maps.Size(24,24),
        };
        for (let index = 0; index < campgrounds.length; index++) {
          const campsite = campgrounds[index];
          const marker = new google.maps.Marker({
            position: {lat:campsite[1], lng:campsite[2]},
            map,
            icon: tent,
            title: campsite[0],
            zIndex:3
          });
          google.maps.event.addListener(marker,"click", () => {
          map.setZoom(12);
          map.setCenter(marker.getPosition());
        });
          google.maps.event.addListener(marker, "dblclick", () => {
            map.setZoom(6);
            map.setCenter({ lat:  51.549, lng: -115.815 });
          });
        }
      }
    </script>
  </head>
  <body>
    <h1>My Camping Trip Through the Canadian Rockies</h1>
    <h2>Alberta is home to some of the most impressive and unique mountains in Canada. 
          I was lucky enough to get to explore them during my roadtrip from Montreal to Vancouver. 
          Here, I share some of my favorite campgrounds and hikes of various levels!</h2>
    <div id="map"></div>
    <div id="legend"><h3>Legend</h3></div>

        <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
    <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDv3MGflguusDaLmV_-BUlmuoUI4EbM88w&callback=initMap&v=weekly"
    async
    ></script>
  </body>
</html>
